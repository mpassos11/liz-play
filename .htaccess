<IfModule mod_rewrite.c>
    RewriteEngine On

    # ----------------------------------------------------
    # AJUSTE CRÍTICO PARA SUBDIRETÓRIOS (localhost)
    # ----------------------------------------------------
    # O Apache precisa saber que a raiz do seu projeto é /liz-play/
    # Se você estivesse na raiz do domínio (como liz-play.com.br), seria apenas RewriteBase /
    RewriteBase /liz-play/

    # 1. Proteção e Otimização
    Options -Indexes
    # Bloqueio de acesso direto a pastas críticas (mantido)
    RewriteRule ^(app|core|config\.php|content|users)/ - [F,L]

    # 2. Impedir loops e acesso a arquivos/diretórios reais
    # Se for um arquivo/diretório real dentro da raiz (ex: .htaccess, robots.txt), para
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # 3. Regra principal: Redireciona TUDO para o public/index.php
    # [QSA] mantém a query string, [L] é a última regra
    RewriteRule ^(.*)$ public/index.php?url=$1 [L,QSA]
</IfModule>